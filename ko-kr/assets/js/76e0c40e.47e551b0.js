(self.webpackChunkmy_first_docusaurus=self.webpackChunkmy_first_docusaurus||[]).push([[4767],{1801:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var a=i(69530),s=i(67294),n=i(95999);function l(){const{status:t,network:e,wallets:i,availableConnectTypes:l,connect:r,disconnect:o}=(0,a.Os)();return s.createElement("div",{className:"buttonContainer",onClick:()=>{t===a.PR.WALLET_NOT_CONNECTED?r(l[0]):o()}},s.createElement("div",{className:"connectwallet"},t===a.PR.WALLET_NOT_CONNECTED?s.createElement(n.Z,{id:"ddd"},"'Connect Wallet'sss"):0==i.length?"Loading...":s.createElement("span",null,i[0].xplaAddress)))}},16730:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var a=i(69530),s=i(67294),n=i(25108);const l=t=>{let{children:e}=t;const[i,l]=(0,s.useState)(),[r,o]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{o("undefined"==typeof window)}),[]),(0,s.useEffect)((()=>{(0,a.c3)().then((t=>l(t))).catch((t=>{n.log(t)}))}),[]),r?s.createElement(s.Fragment,null):s.createElement(a.nS,i,e)}},10204:(t,e,i)=>{"use strict";i.r(e),i.d(e,{assets:()=>H,contentTitle:()=>b,default:()=>I,frontMatter:()=>S,metadata:()=>T,toc:()=>A});var a=i(87462),s=i(67294),n=i(3905);function l(t){let{children:e}=t;return s.createElement("div",{style:{border:"1px solid #000",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",height:600}},e)}function r(t){let{setGameState:e}=t;return s.createElement(s.Fragment,null,s.createElement("h1",null,"Kiting"),s.createElement("button",{onClick:()=>e("play")},"start"),s.createElement("button",{onClick:()=>e("nft")},"start with contract"),s.createElement("button",null,"how to play"),s.createElement("span",null,"Sample token id : kiting_1, kiting_2 (default is kiting_1)"),s.createElement("span",null,"upload your token to contract (xpla12qfmpkkl2p7ljlguus5cdx5v8serc6seued2pqz2r9hhlttnq7rs46wfsu)"),s.createElement("span",null,"please refer to sample token id."),s.createElement("span",null,"kiting_1 tx: 39A6892C300F395CA01718632AB2BCC313DCE2FFD4DAD3C365994108C0A357EF"),s.createElement("span",null,"kiting_2 tx: A4A9CC69D11212B2A93CC387A5F141AB54126E7D7575BA9F3A686BABF64330EA"),s.createElement("span",null,"score store contract : xpla1tezzytqrqwxevj3pvcxk7tdljez0g835wk9msuc8nssukl7k4e3s73tadc"))}var o=i(87536);const c=t=>{const e=(0,s.useRef)(null);return(0,s.useEffect)((()=>{const i=e.current;i&&t(i)}),[]),e};const h=class{ctx=null;attacks=[];isMove=!1;isAttack=!1;gg=!1;kill=0;constructor(t,e,i,a,s,n,l,r,o,c,h,y,m,u,p,d,k,f,g){this.screenWidth=a,this.screenHeight=s,this.position={x:e,y:i},this.enemyPos={x:e,y:0},this.destination={x:e,y:i},this.mousePos={x:-1,y:-1},this.playerColor=n,this.enemyColor=l,this.attackColor=r,this.pointerColor=c,this.hoverColor=o,this.playerVelocity=h,this.enemyVelocity=y,this.increaseEnemyVelocity=m,this.attackVelocity=u,this.radius=p,this.attackWidth=d,this.attackHeight=k,this.enemyHp=f,this.initialEnemyHp=f,this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.startTime=new Date,this.runAnimationFrame(),this.setValue=g}runAnimationFrame(){this.gg||(this.draw(),requestAnimationFrame(this.runAnimationFrame.bind(this)))}getKillNumber(){return this.kill}getScore(){return this.kill*(this.endTime.getTime()-this.startTime.getTime())/1e3}getEnemyVelocity(){return this.enemyVelocity}getEnemyHp(){return this.enemyHp}getPlayTime(){return(this.endTime.getTime()-this.startTime.getTime())/1e3}draw(){const{x:t,y:e}=this.position;if(!this.ctx)return;y(this.position,this.enemyPos)<2*this.radius&&(this.gg=!0,this.setValue("gg",!0),this.endTime=new Date);const i=new Date;this.setValue&&this.setValue("playTime",(i.getTime()-this.startTime.getTime())/1e3),0===this.enemyHp&&(this.enemyVelocity+=this.increaseEnemyVelocity,this.setValue("enemyVelocity",this.enemyVelocity),this.enemyHp+=this.initialEnemyHp,this.setValue("enemyHp",this.initialEnemyHp),this.kill+=1,this.setValue("killScore",this.kill),this.enemyPos=d(this.radius,this.screenWidth,this.screenHeight)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.arc(t,e,this.radius,0,2*Math.PI),this.ctx.fillStyle=this.playerColor,this.ctx.strokeStyle=this.playerColor,this.ctx.lineWidth=1,this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(this.enemyPos.x,this.enemyPos.y,this.radius,0,2*Math.PI),this.ctx.fillStyle=this.enemyColor,this.ctx.strokeStyle=this.enemyColor,y(this.mousePos,this.enemyPos)<this.radius?(this.ctx.strokeStyle=this.hoverColor,this.ctx.lineWidth=3):this.ctx.lineWidth=1,this.ctx.fill(),this.ctx.stroke(),this.enemyPos=u(this.enemyPos,this.position,this.enemyVelocity,this.radius,this.screenWidth,this.screenHeight);if(!(y(this.destination,this.enemyPos)<this.radius)&&this.isMove)this.position=u(this.position,this.destination,this.playerVelocity,this.radius,this.screenWidth,this.screenHeight),this.isMove=!0;else if(this.isAttack){const t=this.enemyPos.x-this.position.x,e=this.enemyPos.y-this.position.y,i=m(t,e),a={x:t/i,y:e/i},s={x:this.position.x,y:this.position.y,dx:a.x,dy:a.y};this.attacks.push(s),this.isAttack=!1,this.isMove=!1}if(this.isAttack&&void 0!==this.destinationClickTime){const t=i.getTime()-this.destinationClickTime.getTime();if(t<400){const e=t/50;this.ctx.beginPath(),this.ctx.arc(this.destination.x,this.destination.y,e,0,2*Math.PI),this.ctx.strokeStyle=this.pointerColor,this.ctx.lineWidth=1,this.ctx.stroke()}}if(0!==this.attacks.length){const t=[];this.attacks.forEach((e=>{if(y(this.enemyPos,e)<this.radius-5)this.enemyHp-=1,this.setValue("enemyHp",this.enemyHp);else{this.ctx.beginPath(),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.atan(e.dy/e.dx)),this.ctx.rect(0,0,this.attackWidth,this.attackHeight),this.ctx.translate(-e.x,-e.y),this.ctx.fillStyle=this.attackColor,this.ctx.fill(),this.ctx.closePath(),this.ctx.resetTransform();const i={x:e.x+e.dx*this.attackVelocity,y:e.y+e.dy*this.attackVelocity,dx:e.dx,dy:e.dy};t.push(i)}})),this.attacks=t}}handleRightClick(t){this.destination.x=t.offsetX,this.destination.y=t.offsetY,this.destinationClickTime=new Date,this.isMove=!0,this.isAttack=!0}handleHover(t){this.mousePos={x:t.offsetX,y:t.offsetY}}},y=(t,e)=>{const i=t.x-e.x,a=t.y-e.y;return m(i,a)},m=(t,e)=>Math.sqrt(t**2+e**2),u=(t,e,i,a,s,n)=>{const l=e.x-t.x,r=e.y-t.y,o=m(l,r),c=l/o,h=r/o,y=t;return t!==e&&(l**2+r**2>i**2?(y.x+=c*i,y.y+=h*i):(y.x=e.x,y.y=e.y),t.x<a&&(y.x=a),t.y<a&&(y.y=a),t.x>s-a&&(y.x=s-a),t.y>n-a&&(y.y=n-a)),y},p=(t,e)=>t+Math.floor(Math.random()*e),d=(t,e,i)=>{const a=Math.random();return a<.25?{x:t,y:p(t,i-t)}:a<.5?{x:e-t,y:p(t,i-t)}:a<.75?{x:p(t,e-t),y:t}:a<1?{x:p(t,e-t),y:i-t}:void 0};function k(t){let{setGameState:e,statusValue:i}=t;const{enemyHp:a,enemyVelocity:n,killScore:l,playTime:r}=i;return s.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",padding:10,borderBottom:"1px solid black"}},s.createElement("span",{className:"material-symbols-outlined",onClick:()=>e("init")},"arrow_back",s.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"})),s.createElement("span",null,"Kiting"),s.createElement("span",null,"EnemyHp : ",a),s.createElement("span",null,"EnemyVelocity : ",n.toFixed(1)),s.createElement("span",null,"KillScore : ",l),s.createElement("span",{style:{width:200}},"Playtime : ",r))}function f(t){let{setGameState:e,setValue:i,values:a,gamedata:n}=t;const l=(0,s.useRef)(null);let r=null;const{playerColor:o,enemyColor:y,attackColor:m,hoverColor:u,pointerColor:p,playerVelocity:d,enemyVelocity:f,increaseEnemyVelocity:g,attackVelocity:x,radius:C,attackWidth:E,attackHeight:v,enemyHp:V}=n,_=c((t=>{const e=l.current?.clientWidth||0,a=l.current?.clientHeight||0;t.width=e,t.height=a,r=new h(t,e/2,a/2,e,a,o,y,m,u,p,d,f,g,x,C,E,v,V,i),document.addEventListener("contextmenu",(t=>{t.preventDefault(),r.handleRightClick(t)})),document.addEventListener("mousemove",(t=>{r.handleHover(t)}))}));return s.createElement(s.Fragment,null,s.createElement(k,{setGameState:e,statusValue:a}),s.createElement("div",{ref:l,style:{width:"100%",height:"100%"}},s.createElement("canvas",{ref:_})))}var g=i(69530),x=i(30826);function C(t){let{setGameState:e,gamedata:i}=t;const[a,n]=(0,s.useState)(null),[l,r]=(0,s.useState)(null),c=(0,o.cI)({mode:"onChange",defaultValues:{enemyHp:1,enemyVelocity:1,killScore:0,playTime:0,gg:!1}}),{watch:h,setValue:y,reset:m}=c,{...u}=h(),p=(0,g.Yk)();return s.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}},u.gg?s.createElement(s.Fragment,null,s.createElement("span",null,"Your Kill Score : ",u.killScore),s.createElement("span",null,"Your PlayTime : ",u.playTime),s.createElement("span",null,"Your Final Score (kill * playtime):"," ",u.killScore*u.playTime),s.createElement("br",null),s.createElement("button",{onClick:()=>{e("init")}},"back to home"),s.createElement("br",null),s.createElement("button",{onClick:()=>{y("gg",!1),m()}},"restart"),s.createElement("br",null),s.createElement("button",{onClick:()=>{(async()=>{try{const t={fee:new x.Fee(2e5,"2000000000000000000axpla"),msgs:[new x.MsgExecuteContract(p.walletAddress,"xpla1tezzytqrqwxevj3pvcxk7tdljez0g835wk9msuc8nssukl7k4e3s73tadc",{record:{contractaddress:"test",finalscore:(u.killScore*u.playTime).toString(),killscore:u.killScore.toString(),walletaddress:p.walletAddress}},void 0)]},e=await p.post(t);n(e)}catch(t){t instanceof g.T$?r("User Denied"):r("Unknown Error: "+(t instanceof Error?t.message:String(t)))}})()}},"Record your score (Record your wallet Address, killscroe, finalscore, and game contract)"),a&&s.createElement(s.Fragment,null,JSON.stringify(a,null,2)),l&&s.createElement("pre",null,l),s.createElement("span",null,"Score Store Contract : xpla1tezzytqrqwxevj3pvcxk7tdljez0g835wk9msuc8nssukl7k4e3s73tadc"),s.createElement("span",null," ","query :"," ",'{\n    "get_scores" : {}\n}')):s.createElement(f,{setGameState:e,setValue:y,values:u,gamedata:i}))}function E(t){let{setGameState:e,setGamedata:i}=t;const[a,n]=(0,s.useState)(""),[l,r]=(0,s.useState)("");return s.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",height:600}},s.createElement("input",{placeholder:"input your nft token_id",onChange:t=>n(t.target.value)}),s.createElement("button",{onClick:async()=>{try{await(async()=>{const t=new x.LCDClient({URL:"https://cube-lcd.xpla.dev/",chainID:"cube_47-5"}),s=(await t.wasm.contractQuery("xpla12qfmpkkl2p7ljlguus5cdx5v8serc6seued2pqz2r9hhlttnq7rs46wfsu",{all_nft_info:{token_id:a}})).info.extension.attributes;i({playerColor:s.filter((t=>"playerColor"===t.trait_type))[0].value,enemyColor:s.filter((t=>"enemyColor"===t.trait_type))[0].value,attackColor:s.filter((t=>"attackColor"===t.trait_type))[0].value,hoverColor:s.filter((t=>"hoverColor"===t.trait_type))[0].value,pointerColor:s.filter((t=>"pointerColor"===t.trait_type))[0].value,playerVelocity:parseInt(s.filter((t=>"playerVelocity"===t.trait_type))[0].value,10),enemyVelocity:parseInt(s.filter((t=>"enemyVelocity"===t.trait_type))[0].value,10),increaseEnemyVelocity:parseInt(s.filter((t=>"increaseEnemyVelocity"===t.trait_type))[0].value,10),attackVelocity:parseInt(s.filter((t=>"attackVelocity"===t.trait_type))[0].value,10),radius:parseInt(s.filter((t=>"radius"===t.trait_type))[0].value,10),attackWidth:parseInt(s.filter((t=>"attackWidth"===t.trait_type))[0].value,10),attackHeight:parseInt(s.filter((t=>"attackHeight"===t.trait_type))[0].value,10),enemyHp:parseInt(s.filter((t=>"enemyHp"===t.trait_type))[0].value,10)}),e("play")})()}catch(l){l instanceof g.T$?r("User Denied"):r(`Unknown Error: ${l instanceof Error?l.message:String(l)}`)}}},"play"),l&&s.createElement("span",{style:{color:"red"}},l))}var v=i(25108);function V(){const[t,e]=(0,s.useState)("init"),[i,a]=(0,s.useState)({playerColor:"red",enemyColor:"black",attackColor:"black",hoverColor:"orange",pointerColor:"black",playerVelocity:5,enemyVelocity:1,increaseEnemyVelocity:.1,attackVelocity:10,radius:20,attackWidth:20,attackHeight:5,enemyHp:1});return(0,s.useEffect)((()=>{try{(async()=>{const t=new x.LCDClient({URL:"https://cube-lcd.xpla.dev/",chainID:"cube_47-5"}),e=(await t.wasm.contractQuery("xpla12qfmpkkl2p7ljlguus5cdx5v8serc6seued2pqz2r9hhlttnq7rs46wfsu",{all_nft_info:{token_id:"kiting_1"}})).info.extension.attributes;a({playerColor:e.filter((t=>"playerColor"===t.trait_type))[0].value,enemyColor:e.filter((t=>"enemyColor"===t.trait_type))[0].value,attackColor:e.filter((t=>"attackColor"===t.trait_type))[0].value,hoverColor:e.filter((t=>"hoverColor"===t.trait_type))[0].value,pointerColor:e.filter((t=>"pointerColor"===t.trait_type))[0].value,playerVelocity:parseInt(e.filter((t=>"playerVelocity"===t.trait_type))[0].value,10),enemyVelocity:parseInt(e.filter((t=>"enemyVelocity"===t.trait_type))[0].value,10),increaseEnemyVelocity:parseInt(e.filter((t=>"increaseEnemyVelocity"===t.trait_type))[0].value,10),attackVelocity:parseInt(e.filter((t=>"attackVelocity"===t.trait_type))[0].value,10),radius:parseInt(e.filter((t=>"radius"===t.trait_type))[0].value,10),attackWidth:parseInt(e.filter((t=>"attackWidth"===t.trait_type))[0].value,10),attackHeight:parseInt(e.filter((t=>"attackHeight"===t.trait_type))[0].value,10),enemyHp:parseInt(e.filter((t=>"enemyHp"===t.trait_type))[0].value,10)})})()}catch(t){v.log(t)}}),[]),s.createElement(l,null,"init"===t&&s.createElement(r,{setGameState:e}),"play"===t&&s.createElement(C,{setGameState:e,gamedata:i}),"nft"===t&&s.createElement(E,{setGameState:e,setGamedata:a}))}var _=i(1801),w=i(16730);const S={sidebar_position:14},b="React Game - Kiting",T={unversionedId:"reactgame",id:"reactgame",title:"React Game - Kiting",description:"",source:"@site/docs/14-reactgame.mdx",sourceDirName:".",slug:"/reactgame",permalink:"/my-first-docusaurus/ko-kr/docs/reactgame",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/14-reactgame.mdx",tags:[],version:"current",sidebarPosition:14,frontMatter:{sidebar_position:14},sidebar:"tutorialSidebar",previous:{title:"CoCosGame \uc801\uc6a9",permalink:"/my-first-docusaurus/ko-kr/docs/playgame"}},H={},A=[],P={toc:A},D="wrapper";function I(t){let{components:e,...i}=t;return(0,n.kt)(D,(0,a.Z)({},P,i,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"react-game---kiting"},"React Game - Kiting"),(0,n.kt)(w.Z,{mdxType:"WalletWrap"},(0,n.kt)(_.Z,{mdxType:"Connect"}),(0,n.kt)(V,{mdxType:"Reactgame"})))}I.isMDXComponent=!0},36563:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},34845:()=>{},52361:()=>{},94616:()=>{},33370:()=>{}}]);